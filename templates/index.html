{% extends "base.html" %}

{% block favicon_stylesheet %} {{ super() }} {% endblock %}
{% block title %} {{ super() }} {% endblock %}

{% block body %}
    <div id="project-section">
        {% include "flash_messages.html" %}
        <div class="project-dir-path">
            Project directory: <span class="path">{{ path }}</span>
        </div>
    </div>

    <div id="takeout-section" data-full="{{ 'True' if db else '' }}">
        {% if db %}
            <div id="takeout-buttons">
                <span>
                    <button id="takeout-setup-button" class="button">Additional Takeout...</button>
                    <button id="update-records-button" class="button">Update existing records</button>
                </span>
                <button id="new-project-button" class="button">New project...</button>
            </div>
        {% endif %}
        <div id="takeout-setup" class="hidden">
            <form id="takeout-form" class="single-field-form-inputs"
                  action="{{ url_for('records.populate_db_form') }}" method="POST">
                <input id="takeout-input" name="takeout-dir" placeholder="Takeout path" required>
                <input class="button" type="submit" value="Add Takeout data">
            </form>
            {% include "takeout_help.html" %}
        </div>
        <div id="db-progress">
            <div id="progress-bar-container" style="display:none;">
                <div id="progress-bar-rectangle">
                    <div id="progress-bar">
                        <div id="progress-bar-text"><span></span></div>
                    </div>
                </div>
                <button id="takeout-cancel-button" class="button-cancel">Stop</button>
            </div>
            <div id="progress-msg"></div>
            <div id="wait-for-db"></div>
        </div>
    </div>
    <script src="{{ url_for('static', filename='manage_takeout.js') }}"></script>
{% endblock %}