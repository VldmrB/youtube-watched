{% extends "base.html" %}

{% block favicon_stylesheet %} {{ super() }} {% endblock %}
{% block title %} {{ super() }} {% endblock %}

{% block body %}
    <div id="project-section">
        {% include "flash_messages.html" %}
        <div class="project-dir-path">
            Project directory: <span class="path">{{ path }}</span>
        </div>
    </div>
    <div id="takeout-section" data-full="{{ 'True' if db else '' }}">
        <div id="all-buttons">
            <div id="takeout-buttons">
                    <button id="takeout-setup-button" class="button">Add Takeout</button>
                    <button id="update-records-button" class="button" {{ 'disabled' if not db else '' }}>
                        Update existing records</button>
                    <button id="takeout-cancel-button" class="button-cancel" disabled>Stop</button>
            </div>
            <button id="visualize-button" class="button" {{ 'disabled' if not db else '' }}>Visualize</button>
            <button id="new-project-button" class="button">New project</button>
        </div>
        <div id="takeout-setup" class="{{ 'hidden' if db else '' }}">
            <form id="takeout-form" class="single-field-form-inputs"
                  action="{{ url_for('records.populate_db_form') }}" method="POST">
                <input id="takeout-input" name="takeout-dir" placeholder="Takeout path" required>
                <input class="button" type="submit" value="Start">
            </form>
            <div>
                Extract each Takeout archive to a directory with the same name as the
                archive and then point to the directory containing all of them, i.e.:
                <pre>&lt;Containing directory&gt;
<!--             -->        takeout-20181120T163352Z-001
<!--             -->        takeout-20190311T162142Z-001
<!--             -->        ...</pre>
            </div>
        </div>
        <div id="db-progress">
            <div id="progress-bar-container">
                <div id="progress-bar-rectangle">
                    <div id="progress-bar"></div>
                    <div id="progress-bar-text"><span></span></div>
                </div>
            </div>
            <div id="progress-msg"></div>
            <div id="wait-for-db"></div>
        </div>
    </div>
    {% include "help/takeout_help.html" %}
    <script src="{{ url_for('static', filename='js/manage_takeout.js') }}"></script>
{% endblock %}